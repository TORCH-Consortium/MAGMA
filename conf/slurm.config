params {
    input_samplesheet = "${projectDir}/resources/reference_set/xbs-nf.devslurm.csv"
    outdir = "results"
    optimize_variant_recalibration = true
    compute_minor_variants = true
    dataset_is_not_contaminated = true
    // resistance_db=  "${projectDir}/resources/resistance_db_v2" // false

    save_mode = 'symlink'


    //NOTE: This is customized version for dev time testing (remove gaussian param)
    GATK_VARIANT_RECALIBRATOR__SNP {
        results_dir = "${params.outdir}/gatk/variant_recalibrator__snp"

        arguments = " --use-allele-specific-annotations \
                        -AS \
                        --target-titv 1.7 \
                        --truth-sensitivity-tranche 100.0 \
                        --truth-sensitivity-tranche 99.9 \
                        --truth-sensitivity-tranche 99.8 \
                        --truth-sensitivity-tranche 99.7 \
                        --truth-sensitivity-tranche 99.6 \
                        --truth-sensitivity-tranche 99.5 \
                        --truth-sensitivity-tranche 99.4 \
                        --truth-sensitivity-tranche 99.3 \
                        --truth-sensitivity-tranche 99.2 \
                        --truth-sensitivity-tranche 99.1 \
                        --truth-sensitivity-tranche 99.0 \
                        --max-gaussians 2 \
                        -mq-cap 60"
    }


}

executor {
    queueSize = 10
    pollInterval = '5sec'
    // submitRateLimit = '50/2min'
}

// singularity {
//     enabled = true
//     autoMounts = true
// }

conda {
    useMamba = true
}

process {

    executor = "slurm"

    time = '1h'
    cpus = 8
    memory = 8.GB


    // //----------------------------------------------
    // // biocontainers
    // //----------------------------------------------

    // withName:
    // 'FASTQC.*' {
    //     container = "quay.io/biocontainers/fastqc:0.11.8--2"
    // }

    // withName:
    // 'TBPROFILER.*' {
    //     container = "quay.io/biocontainers/tb-profiler:3.0.8--pypyh5e36f6f_0"
    // }

    // withName:
    // 'MULTIQC.*' {
    //     container = "quay.io/biocontainers/multiqc:1.11--pyhdfd78af_0"
    // }

    // withName:
    // 'CLUSTERPICKER.*' {
    //     container = "quay.io/biocontainers/clusterpicker:1.2.3--2"
    // }

    // withName:
    // 'SNPEFF.*' {
    //     container = 'quay.io/biocontainers/snpeff:4.3.1t--4'
    //     // container = "https://depot.galaxyproject.org/singularity/snpeff:4.3.1t--4"
    // }

    // withName:
    // 'SAMTOOLS.*' {
    //     container = "quay.io/biocontainers/samtools:1.9--h10a08f8_12"
    // }

    // withName:
    // 'BGZIP.*' {
    //     container = "quay.io/biocontainers/samtools:1.9--h10a08f8_12"
    // }

    // withName:
    // 'BCFTOOLS.*' {
    //     container = "quay.io/biocontainers/bcftools:1.9--h68d8f2e_9"
    // }


    // withName:
    // 'LOFREQ.*' {
    //     container = "quay.io/biocontainers/lofreq:2.1.5--py38h588ecb2_4"
    // }

    // withName:
    // 'DELLY.*' {
    //     container = "quay.io/biocontainers/delly:0.8.7--he03298f_1"
    // }

    // withName:
    // 'SNPSITES.*' {
    //     container = "quay.io/biocontainers/snp-sites:2.4.0--ha92aebf_3"
    // }

    // withName:
    // 'SNPDISTS.*' {
    //     container = "quay.io/biocontainers/snp-dists:0.8.2--h5bf99c6_0"
    // }

    withName:
    'IQTREE.*' {
        // container = "quay.io/biocontainers/iqtree:2.1.2--h56fc30b_0"
        cpus = 2
    }


    //----------------------------------------------
    // custom containers
    //----------------------------------------------

    // withName:
    // 'GATK.*' {
    //     container = "abhi18av/gatk_r_datamash:0.0.1"
    // }

    // withName:
    // 'QUANTTB.*' {
    //     container = 'abhi18av/quanttb_bwa:0.0.1'
    //     memory = 32.GB
    // }

    // withName:
    // 'BWA.*' {
    //     container = 'abhi18av/bwa_samtools:0.0.1'
    // }

}
